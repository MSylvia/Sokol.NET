version: '1.0.0.{build}'
image:
- Visual Studio 2019
environment:
  DOTNET_CLI_TELEMETRY_OPTOUT: true
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
branches:
  only:
  - master
clone_depth: 1 
init:
  - cmd: git config --global core.autocrlf true
before_build:
  - cmd: git submodule update --init --recursive
  - cmd: dotnet restore ./src/Sokol.sln --verbosity m
build_script:
  - cmd: dotnet publish ./src/Sokol.Graphics/Sokol.Graphics.csproj --no-restore -c Release
after_build:
before_test:
  - cmd: dotnet restore ./src/Sokol.sln --verbosity m
  - cmd: dotnet build ./src/Sokol.Graphics/Sokol.Graphics.Tests.csproj --no-restore --verbosity m -c Debug
test_script:
  - cmd: dotnet test ./src/Sokol.Graphics/Sokol.Graphics.Tests.csproj  --no-build --verbosity n -c Debug
on_finish :
deploy: off